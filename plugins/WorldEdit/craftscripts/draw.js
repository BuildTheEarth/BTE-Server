!function(){"use strict";function t(e,r,i){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(r):a.value}})(e,r,i||e)}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");var r,i;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&(r=t,i=e,(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(r,i))}function i(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var i,a,o,s=n(t);if(r){var h=n(this).constructor;i=Reflect.construct(s,arguments,h)}else i=s.apply(this,arguments);return a=this,!(o=i)||"object"!==e(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a):o}}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}importPackage(Packages.java.io),importPackage(Packages.java.awt);var h=function(){function t(){a(this,t),this.Orientation={none:1,upright:2,swapped:3}}return s(t,[{key:"orientProjection",value:function(t){return t.upright()?t:new u(t)}},{key:"upright",value:function(){return this.fromGeo(0,90)[1]<=this.fromGeo(0,-90)[1]}}]),t}(),c=function(t){r(n,h);var e=i(n);function n(t){var r;return a(this,n),(r=e.call(this)).input=t,r}return s(n,[{key:"upright",value:function(){return this.input.upright()}},{key:"bounds",value:function(){return this.input.bounds()}},{key:"metersPerUnit",value:function(){return this.input.metersPerUnit()}}]),n}(),u=function(t){r(n,c);var e=i(n);function n(){return a(this,n),e.apply(this,arguments)}return s(n,[{key:"toGeo",value:function(t,e){return this.input.toGeo(t,-e)}},{key:"fromGeo",value:function(t,e){var r=this.input.fromGeo(t,e);return r[1]=-r[1],r}},{key:"upright",value:function(){return!this.input.upright()}},{key:"bounds",value:function(){var t=this.input.bounds();return new[t[0],-t[3],t[2],-t[1]]}}]),n}(),l=function(t){r(n,c);var e=i(n);function n(t,r,i){var o;return a(this,n),(o=e.call(this,t)).scaleX=r,o.scaleY=i||r,o}return s(n,[{key:"toGeo",value:function(t,e){return this.input.toGeo(t/this.scaleX,e/this.scaleY)}},{key:"fromGeo",value:function(t,e){var r=this.input.fromGeo(t,e);return r[0]*=this.scaleX,r[1]*=this.scaleY,r}},{key:"upright",value:function(){return!!(this.scaleY<0^this.input.upright())}},{key:"bounds",value:function(){var t=this.input.bounds();return t[0]*=this.scaleX,t[1]*=this.scaleY,t[2]*=this.scaleX,t[3]*=this.scaleY,t}},{key:"metersPerUnit",value:function(){return this.input.metersPerUnit()/Math.sqrt((this.scaleX*this.scaleX+this.scaleY*this.scaleY)/2)}}]),n}(),T=function(t){r(n,h);var e=i(n);function n(){var t;a(this,n),(t=e.call(this)).ARC=2*Math.asin(Math.sqrt(5-Math.sqrt(5))/Math.sqrt(10)),t.TO_RADIANS=Math.PI/180,t.ROOT3=Math.sqrt(3),t.newton=5,t.VERT=[10.536199,64.7,-5.24539,2.300882,58.157706,10.447378,122.3,39.1,-143.47849,50.103201,-67.13233,23.717925,36.52151,-50.1032,112.867673,-23.71793,174.75461,-2.300882,-121.84229,-10.44735,-57.7,-39.1,-169.4638,-64.7],t.ISO=[2,1,6,1,0,2,0,1,5,1,5,10,1,6,10,7,2,6,2,3,7,3,0,2,0,3,4,4,0,5,5,4,9,9,5,10,10,9,11,11,6,10,6,7,11,8,3,7,8,3,4,8,4,9,9,8,11,7,8,11,11,6,7,3,7,8],t.CENTER_MAP=[-3,7,-2,5,-1,7,2,5,4,5,-4,1,-3,-1,-2,1,-1,-1,0,1,1,-1,2,1,3,-1,4,1,5,-1,-3,-5,-1,-5,1,-5,2,-7,-4,-7,-5,-5,-2,-7],t.FLIP_TRIANGLE=[1,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,0,1,0],t.CENTROID=new Array(66),t.ROTATION_MATRIX=new Array(198),t.INVERSE_ROTATION_MATRIX=new Array(198);for(var r=0;r<22;r++)t.CENTER_MAP[2*r]*=.5*t.ARC,t.CENTER_MAP[2*r+1]*=t.ARC*t.ROOT3/12;for(var i=0;i<12;i++)t.VERT[2*i+1]=90-t.VERT[2*i+1],t.VERT[2*i]*=t.TO_RADIANS,t.VERT[2*i+1]*=t.TO_RADIANS;for(var o=0;o<22;o++){var s=t.cart(t.VERT[2*t.ISO[3*o]],t.VERT[2*t.ISO[3*o]+1]),h=t.cart(t.VERT[2*t.ISO[3*o+1]],t.VERT[2*t.ISO[3*o+1]+1]),c=t.cart(t.VERT[2*t.ISO[3*o+2]],t.VERT[2*t.ISO[3*o+2]+1]),u=s[0]+h[0]+c[0],l=s[1]+h[1]+c[1],T=s[2]+h[2]+c[2],f=Math.sqrt(u*u+l*l+T*T);t.CENTROID[3*o]=u/f,t.CENTROID[3*o+1]=l/f,t.CENTROID[3*o+2]=T/f;var R=Math.atan2(l,u),O=Math.atan2(Math.sqrt(u*u+l*l),T),A=[t.VERT[2*t.ISO[3*o]],t.VERT[2*t.ISO[3*o]+1]];A=t.yRot(A[0]-R,A[1],-O),t.produceZYZRotationMatrix(t.ROTATION_MATRIX,9*o,-R,-O,Math.PI/2-A[0]),t.produceZYZRotationMatrix(t.INVERSE_ROTATION_MATRIX,9*o,A[0]-Math.PI/2,O,R)}return t.FACE_ON_GRID=[-1,-1,0,1,2,-1,-1,3,-1,4,-1,-1,5,6,7,8,9,10,11,12,13,14,20,19,15,21,16,-1,17,18,-1,-1,-1],t.Z=Math.sqrt(5+2*Math.sqrt(5))/Math.sqrt(15),t.EL=Math.sqrt(8)/Math.sqrt(5+Math.sqrt(5)),t.EL6=t.EL/6,t.DVE=Math.sqrt(3+Math.sqrt(5))/Math.sqrt(5+Math.sqrt(5)),t.R=-3*t.EL6/t.DVE,t.OUT_OF_BOUNDS=[NaN,NaN],t}return s(n,[{key:"produceZYZRotationMatrix",value:function(t,e,r,i,n){var a=Math.sin(r),o=Math.cos(r),s=Math.sin(i),h=Math.cos(i),c=Math.sin(n),u=Math.cos(n);t[e+0]=o*h*u-c*a,t[e+1]=-a*h*u-c*o,t[e+2]=u*s,t[e+3]=c*h*o+u*a,t[e+4]=u*o-c*h*a,t[e+5]=c*s,t[e+6]=-s*o,t[e+7]=s*a,t[e+8]=h}},{key:"cart",value:function(t,e){var r=Math.sin(e);return[r*Math.cos(t),r*Math.sin(t),Math.cos(e)]}},{key:"findTriangle",value:function(t,e,r){for(var i=Number.MAX_VALUE,n=0,a=0;a<20;a++){var o=this.CENTROID[3*a]-t,s=this.CENTROID[3*a+1]-e,h=this.CENTROID[3*a+2]-r,c=o*o+s*s+h*h;if(c<i){if(c<.1)return a;n=a,i=c}}return n}},{key:"findMapTriangle",value:function(t,e){for(var r=Number.MAX_VALUE,i=0,n=0;n<20;n++){var a=this.CENTER_MAP[2*n]-t,o=this.CENTER_MAP[2*n+1]-e,s=a*a+o*o;s<r&&(i=n,r=s)}return i}},{key:"findTriangleGrid",value:function(t,e){var r,i=t/this.ARC,n=e/(this.ARC*this.ROOT3);if(n>-.25)if(n<.25)r=1;else{if(!(n<=.75))return-1;r=0,n=.5-n}else{if(!(n>=-.75))return-1;r=2,n=-n-.5}var a=i-(n+=.25),o=i+n,s=Math.floor(a),h=2*s+(Math.floor(o)!==s?1:0)+6;return h<0||h>=11?-1:this.FACE_ON_GRID[11*r+h]}},{key:"triangleTransform",value:function(t,e,r){var i=this.Z/r,n=i*t,a=i*e,o=Math.atan((2*a/this.ROOT3-this.EL6)/this.DVE),s=Math.atan((n-a/this.ROOT3-this.EL6)/this.DVE),h=Math.atan((-n-a/this.ROOT3-this.EL6)/this.DVE);return[.5*(s-h),(2*o-s-h)/(2*this.ROOT3)]}},{key:"inverseTriangleTransformNewton",value:function(t,e){for(var r=Math.tan(this.ROOT3*e+t),i=Math.tan(2*t),n=r*r+1,a=i*i+1,o=r,s=i,h=0,c=1,u=1,l=0;l<this.newton;l++)o=((h-=(o+s+h-this.R)/(n*c*c+a*u*u+1))+r)*(c=1/(1-h*r)),s=(h+i)*(u=1/(1-h*i));var T=this.ROOT3*(this.DVE*o+this.EL6)/2,f=(this.DVE*s+T/this.ROOT3+this.EL6)/this.Z,R=T/this.Z,O=1/Math.sqrt(1+f*f+R*R);return[O*f,O*R,O]}},{key:"inverseTriangleTransformCbrt",value:function(t,e){var r=Math.tan(this.ROOT3*e+t),i=Math.tan(2*t),n=i*r,a=-(this.R*i*r+2*i+2*r),o=3+this.R*i+this.R*r-2*i*r,s=-a/(3*n),h=s*s*s+(a*o-3*n*(i+r-this.R))/(6*n*n),c=o/(3*n)-s*s,u=Math.sqrt(-(h*h+c*c*c)),l=Math.sqrt(u*u+h*h),T=Math.atan2(u,h),f=2*Math.cbrt(l)*Math.cos(T/3)+s,R=(f+r)/(1-f*r),O=(f+i)/(1-f*i),A=this.ROOT3*(this.DVE*R+this.EL6)/2,v=(this.DVE*O+A/this.ROOT3+this.EL6)/this.Z,E=A/this.Z,g=1/Math.sqrt(1+v*v+E*E);return[g*v,g*E,g]}},{key:"inverseTriangleTransformCbrtNewton",value:function(t,e){for(var r=Math.tan(this.ROOT3*e+t),i=Math.tan(2*t),n=r+i,a=i*r,o=-(this.R*a+2*i+2*r),s=3+this.R*n-2*a,h=n-this.R,c=3*a,u=2*o,l=-h/s,T=0;T<this.newton;T++){var f=l*l;l-=(a*f*l+o*f+s*l+h)/(c*f+u*l+s)}var R=(l+r)/(1-l*r),O=(l+i)/(1-l*i),A=this.ROOT3*(this.DVE*R+this.EL6)/2,v=(this.DVE*O+A/this.ROOT3+this.EL6)/this.Z,E=A/this.Z,g=1/Math.sqrt(1+v*v+E*E);return[g*v,g*E,g]}},{key:"inverseTriangleTransform",value:function(t,e){return this.inverseTriangleTransformNewton(t,e)}},{key:"yRot",value:function(t,e,r){var i=this.cart(t,e),n=i[0];i[0]=i[2]*Math.sin(r)+n*Math.cos(r),i[2]=i[2]*Math.cos(r)-n*Math.sin(r);var a=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);return i[0]/=a,i[1]/=a,i[2]/=a,[Math.atan2(i[1],i[0]),Math.atan2(Math.sqrt(i[0]*i[0]+i[1]*i[1]),i[2])]}},{key:"fromGeo",value:function(t,e){e=90-e,t*=this.TO_RADIANS,e*=this.TO_RADIANS;var r=Math.sin(e),i=Math.cos(t)*r,n=Math.sin(t)*r,a=Math.cos(e),o=this.findTriangle(i,n,a),s=9*o,h=i*this.ROTATION_MATRIX[s+0]+n*this.ROTATION_MATRIX[s+1]+a*this.ROTATION_MATRIX[s+2],c=i*this.ROTATION_MATRIX[s+3]+n*this.ROTATION_MATRIX[s+4]+a*this.ROTATION_MATRIX[s+5],u=i*this.ROTATION_MATRIX[s+6]+n*this.ROTATION_MATRIX[s+7]+a*this.ROTATION_MATRIX[s+8],l=this.triangleTransform(h,c,u);return 0!==this.FLIP_TRIANGLE[o]&&(l[0]=-l[0],l[1]=-l[1]),i=l[0],(15===o&&i>l[1]*this.ROOT3||14===o)&&i>0&&(l[0]=.5*i-.5*this.ROOT3*l[1],l[1]=.5*this.ROOT3*i+.5*l[1],o+=6),l[0]+=this.CENTER_MAP[2*o],l[1]+=this.CENTER_MAP[2*o+1],l}},{key:"toGeo",value:function(t,e){var r=this.findTriangleGrid(t,e);if(-1===r)return this.OUT_OF_BOUNDS;switch(t-=this.CENTER_MAP[2*r],e-=this.CENTER_MAP[2*r+1],r){case 14:if(t>0)return this.OUT_OF_BOUNDS;break;case 20:if(-e*this.ROOT3>t)return this.OUT_OF_BOUNDS;break;case 15:if(t>0&&t>e*this.ROOT3)return this.OUT_OF_BOUNDS;break;case 21:if(t<0||-e*this.ROOT3>t)return this.OUT_OF_BOUNDS}0!==this.FLIP_TRIANGLE[r]&&(t=-t,e=-e);var i=this.inverseTriangleTransform(t,e);t=i[0],e=i[1];var n=i[2],a=9*r,o=t*this.INVERSE_ROTATION_MATRIX[a+0]+e*this.INVERSE_ROTATION_MATRIX[a+1]+n*this.INVERSE_ROTATION_MATRIX[a+2],s=t*this.INVERSE_ROTATION_MATRIX[a+3]+e*this.INVERSE_ROTATION_MATRIX[a+4]+n*this.INVERSE_ROTATION_MATRIX[a+5],h=t*this.INVERSE_ROTATION_MATRIX[a+6]+e*this.INVERSE_ROTATION_MATRIX[a+7]+n*this.INVERSE_ROTATION_MATRIX[a+8];return[Math.atan2(s,o)/this.TO_RADIANS,90-Math.acos(h)/this.TO_RADIANS]}},{key:"bounds",value:function(){return[-3*this.ARC,-.75*this.ARC*this.ROOT3,2.5*this.ARC,.75*this.ARC*this.ROOT3]}},{key:"upright",value:function(){return!1}},{key:"metersPerUnit",value:function(){return Math.sqrt(5101e11/(20*this.ROOT3*this.ARC*this.ARC/4))}}]),n}(),f=function(e){r(h,T);var o=i(h);function h(){var t;a(this,h),(t=o.call(this)).VECTOR_SCALE_FACTOR=.8715371854532509;for(var e=null,r=new Array(257),i=new Array(r.length),n=0;n<r.length;n++)r[n]=[];for(var s=0;s<i.length;s++)i[s]=[];try{if((e=context.getSafeOpenFile("craftscripts/data","conformal","txt")).exists()){for(var c=new BufferedReader(new FileReader(e)),u=0;u<r.length;u++){var l=new Array(r.length-u),T=new Array(r.length-u);r[u]=l,i[u]=T}for(var f=0;f<r.length;f++)for(var R=0;R<r.length-f;R++){var A=c.readLine(),v=(A=A.substring(1,A.length()-3)).split(", ");r[R][f]=Number.parseFloat(v[0])*t.VECTOR_SCALE_FACTOR,i[R][f]=Number.parseFloat(v[1])*t.VECTOR_SCALE_FACTOR}}else player.printError("Conformal.txt doesn't exist.");c.close()}catch(E){player.printError("Can't load conformal: "+E)}return t.inverse=new O(r,i),t}return s(h,[{key:"triangleTransform",value:function(e,r,i){var a=t(n(h.prototype),"triangleTransform",this).call(this,e,r,i);return e=a[0],r=a[1],a[0]/=this.ARC,a[1]/=this.ARC,a[0]+=.5,a[1]+=this.ROOT3/6,(a=this.inverse.applyNewtonsMethod(e,r,a[0],a[1],5))[0]-=.5,a[1]-=this.ROOT3/6,a[0]*=this.ARC,a[1]*=this.ARC,a}},{key:"inverseTriangleTransform",value:function(e,r){e/=this.ARC,r/=this.ARC,e+=.5,r+=this.ROOT3/6;var i=this.inverse.getInterpolatedVector(e,r);return t(n(h.prototype),"inverseTriangleTransform",this).call(this,i[0],i[1])}},{key:"metersPerUnit",value:function(){return 40075017/(2*Math.PI)/this.VECTOR_SCALE_FACTOR}}]),h}(),R=function(e){r(h,f);var o=i(h);function h(){var t;return a(this,h),(t=o.call(this)).THETA=-150*t.TO_RADIANS,t.SIN_THETA=Math.sin(t.THETA),t.COS_THETA=Math.cos(t.THETA),t.BERING_X=-.3420420960118339,t.BERING_Y=-.322211064085279,t.ARCTIC_Y=-.2,t.ARCTIC_M=(t.ARCTIC_Y-t.ROOT3*t.ARC/4)/(t.BERING_X- -.5*t.ARC),t.ARCTIC_B=t.ARCTIC_Y-t.ARCTIC_M*t.BERING_X,t.ALEUTIAN_Y=-.5000446805492526,t.ALEUTIAN_XL=-.5149231279757507,t.ALEUTIAN_XR=-.45,t.ALEUTIAN_M=(t.BERING_Y-t.ALEUTIAN_Y)/(t.BERING_X-t.ALEUTIAN_XR),t.ALEUTIAN_B=t.BERING_Y-t.ALEUTIAN_M*t.BERING_X,t}return s(h,[{key:"fromGeo",value:function(e,r){var i=t(n(h.prototype),"fromGeo",this).call(this,e,r),a=i[0],o=i[1],s=this.isEurasianPart(a,o);if(o-=.75*this.ARC*this.ROOT3,s){var c=a+=this.ARC;a=this.COS_THETA*a-this.SIN_THETA*o,o=this.SIN_THETA*c+this.COS_THETA*o}else a-=this.ARC;return i[0]=o,i[1]=-a,i}},{key:"toGeo",value:function(e,r){var i;i=r<0?e>0:r>this.ARC/2?e>-this.ROOT3*this.ARC/2:r*-this.ROOT3<e;var a=e;return e=-r,r=a,i?(a=e,e=this.COS_THETA*e+this.SIN_THETA*r,r=this.COS_THETA*r-this.SIN_THETA*a,e-=this.ARC):e+=this.ARC,r+=.75*this.ARC*this.ROOT3,i!==this.isEurasianPart(e,r)?this.OUT_OF_BOUNDS:t(n(h.prototype),"toGeo",this).call(this,e,r)}},{key:"isEurasianPart",value:function(t,e){return!(t>0)&&(t<-.5*this.ARC||(e>this.ROOT3*this.ARC/4?t<0:e<this.ALEUTIAN_Y?e<this.ALEUTIAN_Y+this.ALEUTIAN_XL-t:e>this.BERING_Y?e<this.ARCTIC_Y?t<this.BERING_X:e<this.ARCTIC_M*t+this.ARCTIC_B:e>this.ALEUTIAN_M*t+this.ALEUTIAN_B))}},{key:"bounds",value:function(){return[-1.5*this.ARC*this.ROOT3,-1.5*this.ARC,3*this.ARC,this.ROOT3*this.ARC]}}]),h}(),O=function(){function t(e,r){a(this,t),this.ROOT3=Math.sqrt(3),this.sideLength=e.length-1,this.VECTOR_X=e,this.VECTOR_Y=r}return s(t,[{key:"getInterpolatedVector",value:function(t,e){t*=this.sideLength;var r,i,n,a,o,s,h,c,u=2*(e*=this.sideLength)/this.ROOT3,l=t-.5*u,T=Math.trunc(l),f=Math.trunc(u);T<0?T=0:T>=this.sideLength&&(T=this.sideLength-1),f<0?f=0:f>=this.sideLength-T&&(f=this.sideLength-T-1);var R=1;e<-this.ROOT3*(t-T-f-1)||f===this.sideLength-T-1?(r=this.VECTOR_X[T][f],i=this.VECTOR_Y[T][f],n=this.VECTOR_X[T][f+1],a=this.VECTOR_Y[T][f+1],o=this.VECTOR_X[T+1][f],s=this.VECTOR_Y[T+1][f],h=.5*this.ROOT3*f,c=T+1+.5*f):(r=this.VECTOR_X[T][f+1],i=this.VECTOR_Y[T][f+1],n=this.VECTOR_X[T+1][f],a=this.VECTOR_Y[T+1][f],o=this.VECTOR_X[T+1][f+1],s=this.VECTOR_Y[T+1][f+1],R=-1,e=-e,h=-.5*this.ROOT3*(f+1),c=T+1+.5*(f+1));var O=-(e-h)/this.ROOT3-(t-c),A=2*(e-h)/this.ROOT3,v=1-O-A;return[r*O+n*A+o*v,i*O+a*A+s*v,(o-r)*this.sideLength,this.sideLength*R*(2*n-r-o)/this.ROOT3,(s-i)*this.sideLength,this.sideLength*R*(2*a-i-s)/this.ROOT3]}},{key:"applyNewtonsMethod",value:function(t,e,r,i,n){for(var a=0;a<n;a++){var o=this.getInterpolatedVector(r,i),s=o[0]-t,h=o[1]-e,c=o[2],u=o[3],l=o[4],T=o[5],f=1/(c*T-u*l);r-=f*(T*s-u*h),i-=f*(-l*s+c*h)}return[r,i]}}]),t}(),A={ignoredBlocks:[context.getBlock("air").id,context.getBlock("tallgrass").id,context.getBlock("sapling").id,context.getBlock("log").id,context.getBlock("log2").id,context.getBlock("leaves").id,context.getBlock("leaves2").id,context.getBlock("deadbush").id,context.getBlock("red_flower").id,context.getBlock("yellow_flower").id,context.getBlock("red_mushroom").id,context.getBlock("brown_mushroom").id,context.getBlock("vine").id,context.getBlock("waterlily").id,context.getBlock("cactus").id,context.getBlock("reeds").id,context.getBlock("pumpkin").id,context.getBlock("melon_block").id,context.getBlock("snow_layer").id,context.getBlock("double_plant").id],allowedBlocks:[context.getBlock("grass").id,context.getBlock("dirt").id,context.getBlock("stone").id,context.getBlock("sand").id,context.getBlock("grass_path").id,context.getBlock("concrete").id,context.getBlock("gravel").id,context.getBlock("water").id,context.getBlock("lava").id]};function v(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(h){n=!0,a=h}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return r}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var d=A.ignoredBlocks,p=A.allowedBlocks;importPackage(Packages.com.sk89q.worldedit),importPackage(Packages.com.sk89q.worldedit.math),importPackage(Packages.com.sk89q.worldedit.blocks);var y=context.remember(),I=0,M=new Error("Incorrect data format");function k(t,e,r,i,n,a,o,s){for(var h=i-t,c=n-e,u=a-r,l=Math.max(Math.abs(h),Math.abs(c),Math.abs(u)),T=h/l,f=c/l,R=u/l,O=Math.max(Math.abs(T),Math.abs(f),Math.abs(R)),A=0;A<l;A+=O){var v=new Vector(Math.floor(t+T*A),Math.floor(e+f*A),Math.floor(r+R*A));C(v,s)&&(v=N(v),p.includes(y.getBlock(v).id)&&(s.up&&(v=v.add(new Vector(0,1,0))),y.setBlock(v,o),I++))}}function N(t){for(;!d.includes(y.getBlock(t.add(new Vector(0,1,0))).id);)t=t.add(new Vector(0,1,0));for(;d.includes(y.getBlock(t).id);)t=t.add(new Vector(0,-1,0));return t}function C(t,e){return!e.region||e.region.contains(new Vector(t.x,e.region.center.y,t.z))}importPackage(Packages.java.io),importPackage(Packages.java.awt),importPackage(Packages.com.sk89q.worldedit),importPackage(Packages.com.sk89q.worldedit.math),importPackage(Packages.com.sk89q.worldedit.blocks),context.checkArgs(2,3,"/cs draw <file> <block> [flags]\n \u2022 \xa7o/cs draw rails1 iron_block\n \u2022 \xa7o/cs draw file3 stone u\nFlags:\n \u2022 \xa7lu\xa7r\xa7c Draws a block above");var m={};argv[3]&&(argv[3]=""+argv[3],m.up=argv[3].includes("u")),player.print("\xa77Please wait..."),function(t,e,r){r=r||{},function(t,e,r){var i,n,a=player.getPosition().y;e=context.getBlock(e);for(var o=(i=void 0,n=void 0,i=new R,n=(new h).orientProjection(i),new l(n,7318261.522857145,7318261.522857145)),s=0;s<t.length;s++)for(var c=t[s],u=0;u<c.length-1;u++){var T=E(o.fromGeo.apply(o,v(c[u])),2),f=T[0],O=T[1],A=E(o.fromGeo.apply(o,v(c[u+1])),2);k(f,a,O,A[0],a,A[1],e,r)}player.print("Operation completed ("+I+" blocks affected).")}(function(t){if("FeatureCollection"!==t.type)throw M;if(!Array.isArray(t.features))throw M;for(var e=[],r=0,i=0;i<t.features.length;i++)if("LineString"===t.features[i].geometry.type){var n=t.features[i].geometry.coordinates;e.push(n),r+=n.length}return player.print("\xa77".concat(r," lines to draw")),e}(t),e,r)}(function(){var t=context.getSafeOpenFile("drawings",argv[1],"geojson",["json","geojson"]);if(t.exists()){var e=new BufferedReader(new FileReader(t)),r="",i="";do{r+=i,r+="\n",i=e.readLine()}while(i);return e.close(),JSON.parse(r)}player.printError("Specified file doesn't exist.")}(),argv[2],m)}();