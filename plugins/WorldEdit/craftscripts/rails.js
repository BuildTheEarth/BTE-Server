!function(){var t={exports:{}};(function(e){(function(){var r,n="Expected a function",o=1,i=2,a=1/0,s=9007199254740991,u="[object Arguments]",c="[object Array]",l="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Function]",y="[object GeneratorFunction]",d="[object Map]",g="[object Number]",v="[object Object]",m="[object RegExp]",b="[object Set]",_="[object String]",T="[object Symbol]",O="[object WeakMap]",A="[object ArrayBuffer]",R="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",k="[object Int8Array]",M="[object Int16Array]",I="[object Int32Array]",N="[object Uint8Array]",C="[object Uint8ClampedArray]",S="[object Uint16Array]",j="[object Uint32Array]",x=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,P=/^\w*$/,B=/^\./,L=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V=/\\(\\)?/g,D=/\w*$/,X=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,F={};F[w]=F[E]=F[k]=F[M]=F[I]=F[N]=F[C]=F[S]=F[j]=!0,F[u]=F[c]=F[A]=F[l]=F[R]=F[f]=F[h]=F[p]=F[d]=F[g]=F[v]=F[m]=F[b]=F[_]=F[O]=!1;var G={};G[u]=G[c]=G[A]=G[R]=G[l]=G[f]=G[w]=G[E]=G[k]=G[M]=G[I]=G[d]=G[g]=G[v]=G[m]=G[b]=G[_]=G[T]=G[N]=G[C]=G[S]=G[j]=!0,G[h]=G[p]=G[O]=!1;var q="object"==typeof e&&e&&e.Object===Object&&e,Y="object"==typeof self&&self&&self.Object===Object&&self,z=q||Y||Function("return this")(),Z="object"==typeof t.exports&&t.exports&&!t.exports.nodeType&&t.exports,$=Z&&t&&!t.nodeType&&t,H=$&&$.exports===Z,W=H&&q.process,J=function(){try{return W&&W.binding("util")}catch(t){}}(),K=J&&J.isTypedArray;function Q(t,e){return t.set(e[0],e[1]),t}function tt(t,e){return t.add(e),t}function et(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););return t}function rt(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function nt(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function ot(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}function it(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function at(t,e){return function(r){return t(e(r))}}function st(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var ut,ct=Array.prototype,lt=Function.prototype,ft=Object.prototype,ht=z["__core-js_shared__"],pt=(ut=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||""))?"Symbol(src)_1."+ut:"",yt=lt.toString,dt=ft.hasOwnProperty,gt=yt.call(Object),vt=ft.toString,mt=RegExp("^"+yt.call(dt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bt=H?z.Buffer:r,_t=z.Symbol,Tt=z.Uint8Array,Ot=at(Object.getPrototypeOf,Object),At=Object.create,Rt=ft.propertyIsEnumerable,wt=ct.splice,Et=Object.getOwnPropertySymbols,kt=bt?bt.isBuffer:r,Mt=at(Object.keys,Object),It=Math.max,Nt=me(z,"DataView"),Ct=me(z,"Map"),St=me(z,"Promise"),jt=me(z,"Set"),xt=me(z,"WeakMap"),Pt=me(Object,"create"),Bt=!Rt.call({valueOf:1},"valueOf"),Lt=Me(Nt),Vt=Me(Ct),Dt=Me(St),Xt=Me(jt),Ut=Me(xt),Ft=_t?_t.prototype:r,Gt=Ft?Ft.valueOf:r,qt=Ft?Ft.toString:r;function Yt(){}function zt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Zt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function $t(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ht(t){var e=-1,r=t?t.length:0;for(this.__data__=new $t;++e<r;)this.add(t[e])}function Wt(t){this.__data__=new Zt(t)}function Jt(t,e){var r=je(t)||Se(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!dt.call(t,i)||o&&("length"==i||Te(i,n))||r.push(i);return r}function Kt(t,e,n){(n===r||Ce(t[e],n))&&("number"!=typeof e||n!==r||e in t)||(t[e]=n)}function Qt(t,e,n){var o=t[e];dt.call(t,e)&&Ce(o,n)&&(n!==r||e in t)||(t[e]=n)}function te(t,e){for(var r=t.length;r--;)if(Ce(t[r][0],e))return r;return-1}function ee(t,e,n,o,i,a,s){var c;if(o&&(c=a?o(t,i,a,s):o(t)),c!==r)return c;if(!De(t))return t;var h=je(t);if(h){if(c=function(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&dt.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!e)return pe(t,c)}else{var O=_e(t),x=O==p||O==y;if(Be(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(O==v||O==u||x&&!a){if(ot(t))return a?t:{};if(c=function(t){return"function"!=typeof t.constructor||Ae(t)?{}:De(e=Ot(t))?At(e):{};var e}(x?{}:t),!e)return function(t,e){return ye(t,be(t),e)}(t,function(e,r){return e&&ye(t,He(t),e)}(c))}else{if(!G[O])return a?t:{};c=function(t,e,r,n){var o,i,a,s=t.constructor;switch(e){case A:return he(t);case l:case f:return new s(+t);case R:return function(t,e){var r=e?he(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case w:case E:case k:case M:case I:case N:case C:case S:case j:return function(t,e){var r=e?he(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case d:return function(t,e,r){return rt(e?r(it(t),!0):it(t),Q,new t.constructor)}(t,n,r);case g:case _:return new s(t);case m:return(a=new(i=t).constructor(i.source,D.exec(i))).lastIndex=i.lastIndex,a;case b:return function(t,e,r){return rt(e?r(st(t),!0):st(t),tt,new t.constructor)}(t,n,r);case T:return o=t,Gt?Object(Gt.call(o)):{}}}(t,O,ee,e)}}s||(s=new Wt);var P=s.get(t);if(P)return P;if(s.set(t,c),!h)var B=n?function(t,e,r){var n=He(t);return je(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,0,be):He(t);return et(B||t,function(r,i){B&&(r=t[i=r]),Qt(c,i,ee(r,e,n,o,i,t,s))}),c}zt.prototype.clear=function(){this.__data__=Pt?Pt(null):{}},zt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},zt.prototype.get=function(t){var e=this.__data__;if(Pt){var n=e[t];return"__lodash_hash_undefined__"===n?r:n}return dt.call(e,t)?e[t]:r},zt.prototype.has=function(t){var e=this.__data__;return Pt?e[t]!==r:dt.call(e,t)},zt.prototype.set=function(t,e){return this.__data__[t]=Pt&&e===r?"__lodash_hash_undefined__":e,this},Zt.prototype.clear=function(){this.__data__=[]},Zt.prototype.delete=function(t){var e=this.__data__,r=te(e,t);return!(r<0||(r==e.length-1?e.pop():wt.call(e,r,1),0))},Zt.prototype.get=function(t){var e=this.__data__,n=te(e,t);return n<0?r:e[n][1]},Zt.prototype.has=function(t){return te(this.__data__,t)>-1},Zt.prototype.set=function(t,e){var r=this.__data__,n=te(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},$t.prototype.clear=function(){this.__data__={hash:new zt,map:new(Ct||Zt),string:new zt}},$t.prototype.delete=function(t){return ve(this,t).delete(t)},$t.prototype.get=function(t){return ve(this,t).get(t)},$t.prototype.has=function(t){return ve(this,t).has(t)},$t.prototype.set=function(t,e){return ve(this,t).set(t,e),this},Ht.prototype.add=Ht.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ht.prototype.has=function(t){return this.__data__.has(t)},Wt.prototype.clear=function(){this.__data__=new Zt},Wt.prototype.delete=function(t){return this.__data__.delete(t)},Wt.prototype.get=function(t){return this.__data__.get(t)},Wt.prototype.has=function(t){return this.__data__.has(t)},Wt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Zt){var n=r.__data__;if(!Ct||n.length<199)return n.push([t,e]),this;r=this.__data__=new $t(n)}return r.set(t,e),this};var re,ne=(re=function(t,e){return t&&oe(t,e,He)},function(t,e){if(null==t)return t;if(!xe(t))return re(t,e);for(var r=t.length,n=-1,o=Object(t);++n<r&&!1!==e(o[n],n,o););return t}),oe=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),a=i.length;a--;){var s=i[++n];if(!1===e(o[s],s,o))break}return t};function ie(t,e){for(var n=0,o=(e=Oe(e,t)?[e]:fe(e)).length;null!=t&&n<o;)t=t[ke(e[n++])];return n&&n==o?t:r}function ae(t,e){return null!=t&&e in Object(t)}function se(t,e,n,a,s){return t===e||(null==t||null==e||!De(t)&&!Xe(e)?t!=t&&e!=e:function(t,e,n,a,s,p){var y=je(t),O=je(e),w=c,E=c;y||(w=(w=_e(t))==u?v:w),O||(E=(E=_e(e))==u?v:E);var k=w==v&&!ot(t),M=E==v&&!ot(e),I=w==E;if(I&&!k)return p||(p=new Wt),y||qe(t)?de(t,e,n,a,s,p):function(t,e,r,n,a,s,u){switch(w){case R:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case A:return!(t.byteLength!=e.byteLength||!n(new Tt(t),new Tt(e)));case l:case f:case g:return Ce(+t,+e);case h:return t.name==e.name&&t.message==e.message;case m:case _:return t==e+"";case d:var c=it;case b:var p=s&i;if(c||(c=st),t.size!=e.size&&!p)return!1;var y=u.get(t);if(y)return y==e;s|=o,u.set(t,e);var v=de(c(t),c(e),n,a,s,u);return u.delete(t),v;case T:if(Gt)return Gt.call(t)==Gt.call(e)}return!1}(t,e,0,n,a,s,p);if(!(s&i)){var N=k&&dt.call(t,"__wrapped__"),C=M&&dt.call(e,"__wrapped__");if(N||C){var S=N?t.value():t,j=C?e.value():e;return p||(p=new Wt),n(S,j,a,s,p)}}return!!I&&(p||(p=new Wt),function(t,e,n,o,a,s){var u=a&i,c=He(t),l=c.length;if(l!=He(e).length&&!u)return!1;for(var f=l;f--;){var h=c[f];if(!(u?h in e:dt.call(e,h)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var y=!0;s.set(t,e),s.set(e,t);for(var d=u;++f<l;){var g=t[h=c[f]],v=e[h];if(o)var m=u?o(v,g,h,e,t,s):o(g,v,h,t,e,s);if(!(m===r?g===v||n(g,v,o,a,s):m)){y=!1;break}d||(d="constructor"==h)}if(y&&!d){var b=t.constructor,_=e.constructor;b!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(y=!1)}return s.delete(t),s.delete(e),y}(t,e,n,a,s,p))}(t,e,se,n,a,s))}function ue(t){return"function"==typeof t?t:null==t?Ke:"object"==typeof t?je(t)?(a=t[0],s=t[1],Oe(a)&&Re(s)?we(ke(a),s):function(t){var e=Ze(t,a);return e===r&&e===s?$e(t,a):se(s,e,r,o|i)}):1==(n=function(t){for(var e=He(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,Re(o)]}return e}(e=t)).length&&n[0][2]?we(n[0][0],n[0][1]):function(t){return t===e||function(t,e,n,a){var s=n.length,u=s;if(null==t)return!u;for(t=Object(t);s--;){var c=n[s];if(c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++s<u;){var l=(c=n[s])[0],f=t[l],h=c[1];if(c[2]){if(f===r&&!(l in t))return!1}else{var p,y=new Wt;if(!(p===r?se(h,f,void 0,o|i,y):p))return!1}}return!0}(t,0,n)}:tr(t);var e,n,a,s}function ce(t){if(!De(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=Ae(t),r=[];for(var n in t)("constructor"!=n||!e&&dt.call(t,n))&&r.push(n);return r}function le(t,e,n,o,i){if(t!==e){if(!je(e)&&!qe(e))var a=ce(e);et(a||e,function(s,u){if(a&&(s=e[u=s]),De(s))i||(i=new Wt),function(t,e,n,o,i,a,s){var u=t[n],c=e[n],l=s.get(c);if(l)Kt(t,n,l);else{var f=a?a(u,c,n+"",t,e,s):r,h=f===r;h&&(f=c,je(c)||qe(c)?je(u)?f=u:Pe(u)?f=pe(u):(h=!1,f=ee(c,!0)):Ue(c)||Se(c)?Se(u)?f=Ye(u):!De(u)||o&&Le(u)?(h=!1,f=ee(c,!0)):f=u:h=!1),h&&(s.set(c,f),i(f,c,o,a,s),s.delete(c)),Kt(t,n,f)}}(t,e,u,n,le,o,i);else{var c=o?o(t[u],s,u+"",t,e,i):r;c===r&&(c=s),Kt(t,u,c)}})}}function fe(t){return je(t)?t:Ee(t)}function he(t){var e=new t.constructor(t.byteLength);return new Tt(e).set(new Tt(t)),e}function pe(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function ye(t,e,n,o){n||(n={});for(var i=-1,a=e.length;++i<a;){var s=e[i],u=o?o(n[s],t[s],s,n,t):r;Qt(n,s,u===r?t[s]:u)}return n}function de(t,e,n,a,s,u){var c=s&i,l=t.length,f=e.length;if(l!=f&&!(c&&f>l))return!1;var h=u.get(t);if(h&&u.get(e))return h==e;var p=-1,y=!0,d=s&o?new Ht:r;for(u.set(t,e),u.set(e,t);++p<l;){var g=t[p],v=e[p];if(a)var m=c?a(v,g,p,e,t,u):a(g,v,p,t,e,u);if(m!==r){if(m)continue;y=!1;break}if(d){if(!nt(e,function(t,e){if(!d.has(e)&&(g===t||n(g,t,a,s,u)))return d.add(e)})){y=!1;break}}else if(g!==v&&!n(g,v,a,s,u)){y=!1;break}}return u.delete(t),u.delete(e),y}function ge(){var t=Yt.iteratee||Qe;return t=t===Qe?ue:t,arguments.length?t(arguments[0],arguments[1]):t}function ve(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function me(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return function(t){return!(!De(t)||(e=t,pt&&pt in e))&&(Le(t)||ot(t)?mt:X).test(Me(t));var e}(n)?n:r}var be=Et?at(Et,Object):er,_e=function(t){return vt.call(t)};function Te(t,e){return!!(e=null==e?s:e)&&("number"==typeof t||U.test(t))&&t>-1&&t%1==0&&t<e}function Oe(t,e){if(je(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Fe(t))||P.test(t)||!x.test(t)||null!=e&&t in Object(e)}function Ae(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ft)}function Re(t){return t==t&&!De(t)}function we(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in Object(n))}}(Nt&&_e(new Nt(new ArrayBuffer(1)))!=R||Ct&&_e(new Ct)!=d||St&&"[object Promise]"!=_e(St.resolve())||jt&&_e(new jt)!=b||xt&&_e(new xt)!=O)&&(_e=function(t){var e=vt.call(t),n=e==v?t.constructor:r,o=n?Me(n):r;if(o)switch(o){case Lt:return R;case Vt:return d;case Dt:return"[object Promise]";case Xt:return b;case Ut:return O}return e});var Ee=Ne(function(t){t=ze(t);var e=[];return B.test(t)&&e.push(""),t.replace(L,function(t,r,n,o){e.push(n?o.replace(V,"$1"):r||t)}),e});function ke(t){if("string"==typeof t||Fe(t))return t;var e=t+"";return"0"==e&&1/t==-a?"-0":e}function Me(t){if(null!=t){try{return yt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Ie(t,e){return(je(t)?et:ne)(t,ge(e,3))}function Ne(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(n);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(Ne.Cache||$t),r}function Ce(t,e){return t===e||t!=t&&e!=e}function Se(t){return Pe(t)&&dt.call(t,"callee")&&(!Rt.call(t,"callee")||vt.call(t)==u)}Ne.Cache=$t;var je=Array.isArray;function xe(t){return null!=t&&Ve(t.length)&&!Le(t)}function Pe(t){return Xe(t)&&xe(t)}var Be=kt||rr;function Le(t){var e=De(t)?vt.call(t):"";return e==p||e==y}function Ve(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}function De(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Xe(t){return!!t&&"object"==typeof t}function Ue(t){if(!Xe(t)||vt.call(t)!=v||ot(t))return!1;var e=Ot(t);if(null===e)return!0;var r=dt.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&yt.call(r)==gt}function Fe(t){return"symbol"==typeof t||Xe(t)&&vt.call(t)==T}var Ge,qe=K?(Ge=K,function(t){return Ge(t)}):function(t){return Xe(t)&&Ve(t.length)&&!!F[vt.call(t)]};function Ye(t){return ye(t,We(t))}function ze(t){return null==t?"":function(t){if("string"==typeof t)return t;if(Fe(t))return qt?qt.call(t):"";var e=t+"";return"0"==e&&1/t==-a?"-0":e}(t)}function Ze(t,e,n){var o=null==t?r:ie(t,e);return o===r?n:o}function $e(t,e){return null!=t&&function(t,e,r){for(var n,o=-1,i=(e=Oe(e,t)?[e]:fe(e)).length;++o<i;){var a=ke(e[o]);if(!(n=null!=t&&r(t,a)))break;t=t[a]}return n||!!(i=t?t.length:0)&&Ve(i)&&Te(a,i)&&(je(t)||Se(t))}(t,e,ae)}function He(t){return xe(t)?Jt(t):function(t){if(!Ae(t))return Mt(t);var e=[];for(var r in Object(t))dt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}function We(t){return xe(t)?Jt(t,!0):ce(t)}var Je=function(t){return e=function(e,n){var o=-1,i=n.length,a=i>1?n[i-1]:r,s=i>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(i--,a):r,s&&function(t,e,r){if(!De(r))return!1;var n=typeof e;return!!("number"==n?xe(r)&&Te(e,r.length):"string"==n&&e in r)&&Ce(r[e],t)}(n[0],n[1],s)&&(a=i<3?r:a,i=1),e=Object(e);++o<i;){var u=n[o];u&&t(e,u,o)}return e},n=It(n===r?e.length-1:n,0),function(){for(var t=arguments,r=-1,o=It(t.length-n,0),i=Array(o);++r<o;)i[r]=t[n+r];r=-1;for(var a=Array(n+1);++r<n;)a[r]=t[r];return a[n]=i,function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(e,this,a)};var e,n}(function(t,e,r){le(t,e,r)});function Ke(t){return t}function Qe(t){return ue("function"==typeof t?t:ee(t,!0))}function tr(t){return Oe(t)?(e=ke(t),function(t){return null==t?r:t[e]}):function(t){return function(e){return ie(e,t)}}(t);var e}function er(){return[]}function rr(){return!1}Yt.compact=function(t){for(var e=-1,r=t?t.length:0,n=0,o=[];++e<r;){var i=t[e];i&&(o[n++]=i)}return o},Yt.iteratee=Qe,Yt.keys=He,Yt.keysIn=We,Yt.memoize=Ne,Yt.merge=Je,Yt.property=tr,Yt.toPlainObject=Ye,Yt.clone=function(t){return ee(t,!1,!0)},Yt.eq=Ce,Yt.forEach=Ie,Yt.get=Ze,Yt.hasIn=$e,Yt.identity=Ke,Yt.isArguments=Se,Yt.isArray=je,Yt.isArrayLike=xe,Yt.isArrayLikeObject=Pe,Yt.isBuffer=Be,Yt.isEmpty=function(t){if(xe(t)&&(je(t)||"string"==typeof t||"function"==typeof t.splice||Be(t)||Se(t)))return!t.length;var e=_e(t);if(e==d||e==b)return!t.size;if(Bt||Ae(t))return!Mt(t).length;for(var r in t)if(dt.call(t,r))return!1;return!0},Yt.isFunction=Le,Yt.isLength=Ve,Yt.isObject=De,Yt.isObjectLike=Xe,Yt.isPlainObject=Ue,Yt.isSymbol=Fe,Yt.isTypedArray=qe,Yt.stubArray=er,Yt.stubFalse=rr,Yt.toString=ze,Yt.each=Ie,Yt.VERSION="4.15.0",$&&(($.exports=Yt)._=Yt,Z._=Yt)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),t=t.exports;var e={RADIUS:6378137},r={};function n(t){var r,n,i,a,s,u,c=0,l=t.length;if(l>2){for(u=0;u<l;u++)u===l-2?(i=l-2,a=l-1,s=0):u===l-1?(i=l-1,a=0,s=1):(i=u,a=u+1,s=u+2),r=t[i],n=t[a],c+=(o(t[s][0])-o(r[0]))*Math.sin(o(n[1]));c=c*e.RADIUS*e.RADIUS/2}return c}function o(t){return t*Math.PI/180}function i(t,e){return function(r){return t(r,e)}}function a(t,e){e=!!e,t[0]=s(t[0],e);for(var r=1;r<t.length;r++)t[r]=s(t[r],!e);return t}function s(t,e){return function(t){return r.ring(t)>=0}(t)===e?t:t.reverse()}r.ring=n;var u,c=function t(e,r){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(i(t,r)),e;case"GeometryCollection":return e.geometries=e.geometries.map(i(t,r)),e;case"Feature":return e.geometry=t(e.geometry,r),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=a(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(i(a,e))),t}(e,r);default:return e}},l={},f={};function h(e,r){return(e.version||r.version)&&e.version!==r.version?(+e.version||0)>(+r.version||0)?e:r:t.merge(e,r)}function p(t){for(var e,r,n,o,i,a,s=function(t){return t[0]},u=function(t){return t[t.length-1]},c=function(t,e){return void 0!==t&&void 0!==e&&t.id===e.id},l=[];t.length;)for(e=t.pop().nodes.slice(),l.push(e);t.length&&!c(s(e),u(e));){for(r=s(e),n=u(e),o=0;o<t.length;o++){if(c(n,s(a=t[o].nodes))){i=e.push,a=a.slice(1);break}if(c(n,u(a))){i=e.push,a=a.slice(0,-1).reverse();break}if(c(r,u(a))){i=e.unshift,a=a.slice(0,-1);break}if(c(r,s(a))){i=e.unshift,a=a.slice(1).reverse();break}a=i=null}if(!a)break;t.splice(o,1),i.apply(e,a)}return l}[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}].forEach(function(t){if("all"===t.polygon)f[t.key]=!0;else{var e="whitelist"===t.polygon?"included_values":"excluded_values",r={};t.values.forEach(function(t){r[t]=!0}),f[t.key]={},f[t.key][e]=r}}),(u=function(e,r,n){return r=t.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:f,deduplicator:h},r),"undefined"!=typeof XMLDocument&&e instanceof XMLDocument||"undefined"==typeof XMLDocument&&e.childNodes?function(e){var r,n,i=new Array,a=new Array,s=new Array;function u(t,e,r){t.hasAttribute(r)&&(e[r]=t.getAttribute(r))}function c(e,r){var n=t.clone(e);u(r,n,"lat"),u(r,n,"lon"),n.__is_center_placeholder=!0,i.push(n)}function l(e,r){var n=t.clone(e);function o(t,e,r){var o={type:"node",id:"_"+n.type+"/"+n.id+"bounds"+r,lat:t,lon:e};n.nodes.push(o.id),i.push(o)}n.nodes=[],o(r.getAttribute("minlat"),r.getAttribute("minlon"),1),o(r.getAttribute("maxlat"),r.getAttribute("minlon"),2),o(r.getAttribute("maxlat"),r.getAttribute("maxlon"),3),o(r.getAttribute("minlat"),r.getAttribute("maxlon"),4),n.nodes.push(n.nodes[0]),n.__is_bounds_placeholder=!0,a.push(n)}return t.each(e.getElementsByTagName("node"),function(e,r){var n={};t.each(e.getElementsByTagName("tag"),function(t){n[t.getAttribute("k")]=t.getAttribute("v")});var o={type:"node"};u(e,o,"id"),u(e,o,"lat"),u(e,o,"lon"),u(e,o,"version"),u(e,o,"timestamp"),u(e,o,"changeset"),u(e,o,"uid"),u(e,o,"user"),t.isEmpty(n)||(o.tags=n),i.push(o)}),t.each(e.getElementsByTagName("way"),function(e,o){var s={},f=[];t.each(e.getElementsByTagName("tag"),function(t){s[t.getAttribute("k")]=t.getAttribute("v")});var h=!1;t.each(e.getElementsByTagName("nd"),function(t,e){var r;(r=t.getAttribute("ref"))&&(f[e]=r),!h&&t.getAttribute("lat")&&(h=!0)});var p={type:"way"};u(e,p,"id"),u(e,p,"version"),u(e,p,"timestamp"),u(e,p,"changeset"),u(e,p,"uid"),u(e,p,"user"),f.length>0&&(p.nodes=f),t.isEmpty(s)||(p.tags=s),(r=e.getElementsByTagName("center")[0])&&c(p,r),h?function(e,r){t.isArray(e.nodes)||(e.nodes=[],t.each(r,function(t,r){e.nodes.push("_anonymous@"+t.getAttribute("lat")+"/"+t.getAttribute("lon"))})),t.each(r,function(t,r){var n,o,a;t.getAttribute("lat")&&(n=t.getAttribute("lat"),o=t.getAttribute("lon"),a={type:"node",id:e.nodes[r],lat:n,lon:o},i.push(a))})}(p,e.getElementsByTagName("nd")):(n=e.getElementsByTagName("bounds")[0])&&l(p,n),a.push(p)}),t.each(e.getElementsByTagName("relation"),function(e,o){var f={},h=[];t.each(e.getElementsByTagName("tag"),function(t){f[t.getAttribute("k")]=t.getAttribute("v")});var p=!1;t.each(e.getElementsByTagName("member"),function(t,e){h[e]={},u(t,h[e],"ref"),u(t,h[e],"role"),u(t,h[e],"type"),(!p&&"node"==h[e].type&&t.getAttribute("lat")||"way"==h[e].type&&t.getElementsByTagName("nd").length>0)&&(p=!0)});var y={type:"relation"};u(e,y,"id"),u(e,y,"version"),u(e,y,"timestamp"),u(e,y,"changeset"),u(e,y,"uid"),u(e,y,"user"),h.length>0&&(y.members=h),t.isEmpty(f)||(y.tags=f),(r=e.getElementsByTagName("center")[0])&&c(y,r),p?function(e,r){t.each(r,function(r,n){var o,s,u;"node"==e.members[n].type?r.getAttribute("lat")&&(o=r.getAttribute("lat"),s=r.getAttribute("lon"),u={type:"node",id:e.members[n].ref,lat:o,lon:s},i.push(u)):"way"==e.members[n].type&&r.getElementsByTagName("nd").length>0&&(e.members[n].ref="_fullGeom"+e.members[n].ref,function(e,r){if(!a.some(function(t){return"way"==t.type&&t.id==r})){var n={type:"way",id:r,nodes:[]};t.each(e,function(t){var e,r,o;t.getAttribute("lat")?(o={type:"node",id:"_anonymous@"+(e=t.getAttribute("lat"))+"/"+(r=t.getAttribute("lon")),lat:e,lon:r},n.nodes.push(o.id),i.push(o)):n.nodes.push(void 0)}),a.push(n)}}(r.getElementsByTagName("nd"),e.members[n].ref))})}(y,e.getElementsByTagName("member")):(n=e.getElementsByTagName("bounds")[0])&&l(y,n),s.push(y)}),o(i,a,s)}(e):function(e){var r=new Array,n=new Array,i=new Array;function a(e){var n=t.clone(e);n.lat=e.center.lat,n.lon=e.center.lon,n.__is_center_placeholder=!0,r.push(n)}function s(e){var o=t.clone(e);function i(t,e,n){var i={type:"node",id:"_"+o.type+"/"+o.id+"bounds"+n,lat:t,lon:e};o.nodes.push(i.id),r.push(i)}o.nodes=[],i(o.bounds.minlat,o.bounds.minlon,1),i(o.bounds.maxlat,o.bounds.minlon,2),i(o.bounds.maxlat,o.bounds.maxlon,3),i(o.bounds.minlat,o.bounds.maxlon,4),o.nodes.push(o.nodes[0]),o.__is_bounds_placeholder=!0,n.push(o)}function u(e){t.isArray(e.nodes)||(e.nodes=e.geometry.map(function(t){return null!==t?"_anonymous@"+t.lat+"/"+t.lon:"_anonymous@unknown_location"})),e.geometry.forEach(function(t,n){var o,i,a;t&&(o=t.lat,i=t.lon,a={type:"node",id:e.nodes[n],lat:o,lon:i},r.push(a))})}function c(t){t.members.forEach(function(t,e){var o,i,a;"node"==t.type?t.lat&&(o=t.lat,i=t.lon,a={type:"node",id:t.ref,lat:o,lon:i},r.push(a)):"way"==t.type&&t.geometry&&(t.ref="_fullGeom"+t.ref,function(t,e){if(!n.some(function(t){return"way"==t.type&&t.id==e})){var o={type:"way",id:e,nodes:[]};t.forEach(function(t){var e,n,i;t?(i={type:"node",id:"_anonymous@"+(e=t.lat)+"/"+(n=t.lon),lat:e,lon:n},o.nodes.push(i.id),r.push(i)):o.nodes.push(void 0)}),n.push(o)}}(t.geometry,t.ref))})}for(var l=0;l<e.elements.length;l++)switch(e.elements[l].type){case"node":var f=e.elements[l];r.push(f);break;case"way":var h=t.clone(e.elements[l]);h.nodes=t.clone(h.nodes),n.push(h),h.center&&a(h),h.geometry?u(h):h.bounds&&s(h);break;case"relation":var p=t.clone(e.elements[l]);p.members=t.clone(p.members),i.push(p);var y=p.members&&p.members.some(function(t){return"node"==t.type&&t.lat||"way"==t.type&&t.geometry&&t.geometry.length>0});p.center&&a(p),y?c(p):p.bounds&&s(p)}return o(r,n,i)}(e);function o(e,o,a){function s(t,e){if("object"!=typeof e&&(e={}),"function"==typeof r.uninterestingTags)return!r.uninterestingTags(t,e);for(var n in t)if(!0!==r.uninterestingTags[n]&&!0!==e[n]&&e[n]!==t[n])return!0;return!1}function u(t){var e={timestamp:t.timestamp,version:t.version,changeset:t.changeset,user:t.user,uid:t.uid};for(var r in e)void 0===e[r]&&delete e[r];return e}for(var l=new Object,f=new Object,h=0;h<e.length;h++)void 0!==l[(_=e[h]).id]&&(_=r.deduplicator(_,l[_.id])),l[_.id]=_,void 0!==_.tags&&s(_.tags)&&(f[_.id]=!0);for(h=0;h<a.length;h++)if(t.isArray(a[h].members))for(var y=0;y<a[h].members.length;y++)"node"==a[h].members[y].type&&(f[a[h].members[y].ref]=!0);var d=new Object,g=new Object;for(h=0;h<o.length;h++){var v=o[h];if(d[v.id]&&(v=r.deduplicator(v,d[v.id])),d[v.id]=v,t.isArray(v.nodes))for(y=0;y<v.nodes.length;y++)"object"!=typeof v.nodes[y]&&(g[v.nodes[y]]=!0,v.nodes[y]=l[v.nodes[y]])}var m=new Array;for(var b in l){var _=l[b];g[b]&&!f[b]||m.push(_)}var T=new Array;for(h=0;h<a.length;h++)T[(R=a[h]).id]&&(R=r.deduplicator(R,T[R.id])),T[R.id]=R;var O,A={node:{},way:{},relation:{}};for(var b in T){var R=T[b];if(t.isArray(R.members))for(y=0;y<R.members.length;y++){var w=R.members[y].type,E=R.members[y].ref;"number"!=typeof E&&(E=E.replace("_fullGeom","")),A[w]?(void 0===A[w][E]&&(A[w][E]=[]),A[w][E].push({role:R.members[y].role,rel:R.id,reltags:R.tags})):r.verbose&&console.warn("Relation",R.type+"/"+R.id,"member",w+"/"+E,"ignored because it has an invalid type")}else r.verbose&&console.warn("Relation",R.type+"/"+R.id,"ignored because it has no members")}var k=[];for(h=0;h<m.length;h++)if(void 0!==m[h].lon&&void 0!==m[h].lat){var M={type:"Feature",id:m[h].type+"/"+m[h].id,properties:{type:m[h].type,id:m[h].id,tags:m[h].tags||{},relations:A.node[m[h].id]||[],meta:u(m[h])},geometry:{type:"Point",coordinates:[+m[h].lon,+m[h].lat]}};m[h].__is_center_placeholder&&(M.properties.geometry="center"),n?n(M):k.push(M)}else r.verbose&&console.warn("POI",m[h].type+"/"+m[h].id,"ignored because it lacks coordinates");var I=[],N=[];for(h=0;h<a.length;h++)if(T[a[h].id]===a[h]){if(void 0!==a[h].tags&&("route"==a[h].tags.type||"waterway"==a[h].tags.type)){if(!t.isArray(a[h].members)){r.verbose&&console.warn("Route",a[h].type+"/"+a[h].id,"ignored because it has no members");continue}if(a[h].members.forEach(function(t){d[t.ref]&&!s(d[t.ref].tags)&&(d[t.ref].is_skippablerelationmember=!0)}),!1===(M=C(a[h]))){r.verbose&&console.warn("Route relation",a[h].type+"/"+a[h].id,"ignored because it has invalid geometry");continue}function C(e){var n,o,i,a=!1;if(n=(n=e.members.filter(function(t){return"way"===t.type})).map(function(t){var n=d[t.ref];return void 0===n||void 0===n.nodes?(r.verbose&&console.warn("Route "+e.type+"/"+e.id,"tainted by a missing or incomplete  way",t.type+"/"+t.ref),void(a=!0)):{id:t.ref,role:t.role,way:n,nodes:n.nodes.filter(function(n){return void 0!==n||(a=!0,r.verbose&&console.warn("Route",e.type+"/"+e.id,"tainted by a way",t.type+"/"+t.ref,"with a missing node"),!1)})}}),o=p(n=t.compact(n)),0==(i=t.compact(o.map(function(e){return t.compact(e.map(function(t){return[+t.lon,+t.lat]}))}))).length)return r.verbose&&console.warn("Route",e.type+"/"+e.id,"contains no coordinates"),!1;var s={type:"Feature",id:e.type+"/"+e.id,properties:{type:e.type,id:e.id,tags:e.tags||{},relations:A[e.type][e.id]||[],meta:u(e)},geometry:{type:1===i.length?"LineString":"MultiLineString",coordinates:1===i.length?i[0]:i}};return a&&(r.verbose&&console.warn("Route",e.type+"/"+e.id,"is tainted"),s.properties.tainted=!0),s}n?n(c(M)):N.push(M)}if(void 0!==a[h].tags&&("multipolygon"==a[h].tags.type||"boundary"==a[h].tags.type)){if(!t.isArray(a[h].members)){r.verbose&&console.warn("Multipolygon",a[h].type+"/"+a[h].id,"ignored because it has no members");continue}var S=0;for(y=0;y<a[h].members.length;y++)"outer"==a[h].members[y].role?S++:r.verbose&&"inner"!=a[h].members[y].role&&console.warn("Multipolygon",a[h].type+"/"+a[h].id,"member",a[h].members[y].type+"/"+a[h].members[y].ref,'ignored because it has an invalid role: "'+a[h].members[y].role+'"');if(a[h].members.forEach(function(t){d[t.ref]&&("outer"!==t.role||s(d[t.ref].tags,a[h].tags)||(d[t.ref].is_skippablerelationmember=!0),"inner"!==t.role||s(d[t.ref].tags)||(d[t.ref].is_skippablerelationmember=!0))}),0==S){r.verbose&&console.warn("Multipolygon relation",a[h].type+"/"+a[h].id,"ignored because it has no outer ways");continue}var j=!1;if(1!=S||s(a[h].tags,{type:!0})||(j=!0),M=null,j){var x=a[h].members.filter(function(t){return"outer"===t.role})[0];if(void 0===(x=d[x.ref])){r.verbose&&console.warn("Multipolygon relation",a[h].type+"/"+a[h].id,"ignored because outer way",x.type+"/"+x.ref,"is missing");continue}x.is_skippablerelationmember=!0,M=P(x,a[h])}else M=P(a[h],a[h]);if(!1===M){r.verbose&&console.warn("Multipolygon relation",a[h].type+"/"+a[h].id,"ignored because it has invalid geometry");continue}function P(e,n){var o,i,a,s,c=!1,l=j?"way":"relation",f="number"==typeof e.id?e.id:+e.id.replace("_fullGeom","");function h(t){var e,r=function(t,e){for(var r=0;r<e.length;r++)if(o(e[r],t))return!0;return!1},n=function(t){return t.map(function(t){return[+t.lat,+t.lon]})},o=function(t,e){for(var r=t[0],n=t[1],o=!1,i=0,a=e.length-1;i<e.length;a=i++){var s=e[i][0],u=e[i][1],c=e[a][0],l=e[a][1];u>n!=l>n&&r<(c-s)*(n-u)/(l-u)+s&&(o=!o)}return o};for(t=n(t),e=0;e<i.length;e++)if(r(n(i[e]),t))return e}o=(o=n.members.filter(function(t){return"way"===t.type})).map(function(t){var e=d[t.ref];return void 0===e||void 0===e.nodes?(r.verbose&&console.warn("Multipolygon",l+"/"+f,"tainted by a missing or incomplete way",t.type+"/"+t.ref),void(c=!0)):{id:t.ref,role:t.role||"outer",way:e,nodes:e.nodes.filter(function(e){return void 0!==e||(c=!0,r.verbose&&console.warn("Multipolygon",l+"/"+f,"tainted by a way",t.type+"/"+t.ref,"with a missing node"),!1)})}}),o=t.compact(o),i=p(o.filter(function(t){return"outer"===t.role})),a=p(o.filter(function(t){return"inner"===t.role})),s=i.map(function(t){return[t]});for(var y=0;y<a.length;y++){var g=h(a[y]);void 0!==g?s[g].push(a[y]):r.verbose&&console.warn("Multipolygon",l+"/"+f,"contains an inner ring with no containing outer")}var v=[];if(0==(v=t.compact(s.map(function(e){var n=t.compact(e.map(function(e){if(!(e.length<4))return t.compact(e.map(function(t){return[+t.lon,+t.lat]}));r.verbose&&console.warn("Multipolygon",l+"/"+f,"contains a ring with less than four nodes")}));if(0!=n.length)return n;r.verbose&&console.warn("Multipolygon",l+"/"+f,"contains an empty ring cluster")}))).length)return r.verbose&&console.warn("Multipolygon",l+"/"+f,"contains no coordinates"),!1;var m="MultiPolygon";1===v.length&&(m="Polygon",v=v[0]);var b={type:"Feature",id:e.type+"/"+f,properties:{type:e.type,id:f,tags:e.tags||{},relations:A[e.type][e.id]||[],meta:u(e)},geometry:{type:m,coordinates:v}};return c&&(r.verbose&&console.warn("Multipolygon",l+"/"+f,"is tainted"),b.properties.tainted=!0),b}n?n(c(M)):N.push(M)}}for(h=0;h<o.length;h++)if(d[o[h].id]===o[h])if(t.isArray(o[h].nodes)){if(!o[h].is_skippablerelationmember){"number"!=typeof o[h].id&&(o[h].id=+o[h].id.replace("_fullGeom","")),o[h].tainted=!1,o[h].hidden=!1;var B=new Array;for(y=0;y<o[h].nodes.length;y++)"object"==typeof o[h].nodes[y]?B.push([+o[h].nodes[y].lon,+o[h].nodes[y].lat]):(r.verbose&&console.warn("Way",o[h].type+"/"+o[h].id,"is tainted by an invalid node"),o[h].tainted=!0);if(B.length<=1)r.verbose&&console.warn("Way",o[h].type+"/"+o[h].id,"ignored because it contains too few nodes");else{var L="LineString";void 0!==o[h].nodes[0]&&void 0!==o[h].nodes[o[h].nodes.length-1]&&o[h].nodes[0].id===o[h].nodes[o[h].nodes.length-1].id&&(void 0!==o[h].tags&&i(o[h].tags)||o[h].__is_bounds_placeholder)&&(L="Polygon",B=[B]),M={type:"Feature",id:o[h].type+"/"+o[h].id,properties:{type:o[h].type,id:o[h].id,tags:o[h].tags||{},relations:A.way[o[h].id]||[],meta:u(o[h])},geometry:{type:L,coordinates:B}},o[h].tainted&&(r.verbose&&console.warn("Way",o[h].type+"/"+o[h].id,"is tainted"),M.properties.tainted=!0),o[h].__is_bounds_placeholder&&(M.properties.geometry="bounds"),n?n(c(M)):"LineString"==L?I.push(M):N.push(M)}}}else r.verbose&&console.warn("Way",o[h].type+"/"+o[h].id,"ignored because it has no nodes");return!!n||((O={type:"FeatureCollection",features:[]}).features=O.features.concat(N),O.features=O.features.concat(I),O.features=O.features.concat(k),r.flatProperties&&O.features.forEach(function(e){e.properties=t.merge(e.properties.meta,e.properties.tags,{id:e.properties.type+"/"+e.properties.id})}),c(O))}function i(t){var e=r.polygonFeatures;if("function"==typeof e)return e(t);if("no"===t.area)return!1;for(var n in t){var o=t[n],i=e[n];if(void 0!==i&&"no"!==o){if(!0===i)return!0;if(i.included_values&&!0===i.included_values[o])return!0;if(i.excluded_values&&!0!==i.excluded_values[o])return!0}}return!1}}).toGeojson=u,l=u;var y={},d=function(t,e,r,n){var o=context.getSafeOpenFile(t,e,r,n);if(o.exists()){var i=new BufferedReader(new FileReader(o)),a="",s="";do{a+=s,a+="\n",s=i.readLine()}while(s);return i.close(),a}};function g(t,e,r){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");var r,n;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&(r=t,n=e,(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(r,n))}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n,o,i=_(t);if(e){var a=_(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return n=this,!(o=r)||"object"!==v(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n):o}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function A(t,e,r){return e&&O(t.prototype,e),r&&O(t,r),t}importPackage(Packages.java.io),importPackage(Packages.java.net),importPackage(Packages.java.nio.charset),importPackage(Packages.org.apache.commons.io),y=function(t,e,r){r=r||{};var n=d("../","terra121","cfg",[]),o=(n?n.match(new RegExp("overpass_interpreter=(.*)\\n"))[1]:"https://overpass.kumi.systems/api/interpreter")+"/api/interpreter?data=[out:json];"+t;try{player.print("\xa77\xa7oDatabase query...");var i=new URL(o).openConnection();i.addRequestProperty("User-Agent","BTE-tools");var a=i.getInputStream(),s=new StringWriter;IOUtils.copy(a,s,StandardCharsets.UTF_8);var u=s.toString();e(void 0,l(JSON.parse(u),{flatProperties:r.flatProperties||!1}))}catch(c){player.printError("Osm region download failed, no osm features will spawn, "+c)}},importPackage(Packages.java.io),importPackage(Packages.java.awt);var R=function(){function t(){T(this,t),this.Orientation={none:1,upright:2,swapped:3}}return A(t,[{key:"orientProjection",value:function(t){return t.upright()?t:new E(t)}},{key:"upright",value:function(){return this.fromGeo(0,90)[1]<=this.fromGeo(0,-90)[1]}}]),t}(),w=function(t){m(r,R);var e=b(r);function r(t){var n;return T(this,r),(n=e.call(this)).input=t,n}return A(r,[{key:"upright",value:function(){return this.input.upright()}},{key:"bounds",value:function(){return this.input.bounds()}},{key:"metersPerUnit",value:function(){return this.input.metersPerUnit()}}]),r}(),E=function(t){m(r,w);var e=b(r);function r(){return T(this,r),e.apply(this,arguments)}return A(r,[{key:"toGeo",value:function(t,e){return this.input.toGeo(t,-e)}},{key:"fromGeo",value:function(t,e){var r=this.input.fromGeo(t,e);return r[1]=-r[1],r}},{key:"upright",value:function(){return!this.input.upright()}},{key:"bounds",value:function(){var t=this.input.bounds();return new[t[0],-t[3],t[2],-t[1]]}}]),r}(),k=function(t){m(r,w);var e=b(r);function r(t,n,o){var i;return T(this,r),(i=e.call(this,t)).scaleX=n,i.scaleY=o||n,i}return A(r,[{key:"toGeo",value:function(t,e){return this.input.toGeo(t/this.scaleX,e/this.scaleY)}},{key:"fromGeo",value:function(t,e){var r=this.input.fromGeo(t,e);return r[0]*=this.scaleX,r[1]*=this.scaleY,r}},{key:"upright",value:function(){return!!(this.scaleY<0^this.input.upright())}},{key:"bounds",value:function(){var t=this.input.bounds();return t[0]*=this.scaleX,t[1]*=this.scaleY,t[2]*=this.scaleX,t[3]*=this.scaleY,t}},{key:"metersPerUnit",value:function(){return this.input.metersPerUnit()/Math.sqrt((this.scaleX*this.scaleX+this.scaleY*this.scaleY)/2)}}]),r}(),M=function(t){m(r,R);var e=b(r);function r(){var t;T(this,r),(t=e.call(this)).ARC=2*Math.asin(Math.sqrt(5-Math.sqrt(5))/Math.sqrt(10)),t.TO_RADIANS=Math.PI/180,t.ROOT3=Math.sqrt(3),t.newton=5,t.VERT=[10.536199,64.7,-5.24539,2.300882,58.157706,10.447378,122.3,39.1,-143.47849,50.103201,-67.13233,23.717925,36.52151,-50.1032,112.867673,-23.71793,174.75461,-2.300882,-121.84229,-10.44735,-57.7,-39.1,-169.4638,-64.7],t.ISO=[2,1,6,1,0,2,0,1,5,1,5,10,1,6,10,7,2,6,2,3,7,3,0,2,0,3,4,4,0,5,5,4,9,9,5,10,10,9,11,11,6,10,6,7,11,8,3,7,8,3,4,8,4,9,9,8,11,7,8,11,11,6,7,3,7,8],t.CENTER_MAP=[-3,7,-2,5,-1,7,2,5,4,5,-4,1,-3,-1,-2,1,-1,-1,0,1,1,-1,2,1,3,-1,4,1,5,-1,-3,-5,-1,-5,1,-5,2,-7,-4,-7,-5,-5,-2,-7],t.FLIP_TRIANGLE=[1,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,0,1,0],t.CENTROID=new Array(66),t.ROTATION_MATRIX=new Array(198),t.INVERSE_ROTATION_MATRIX=new Array(198);for(var n=0;n<22;n++)t.CENTER_MAP[2*n]*=.5*t.ARC,t.CENTER_MAP[2*n+1]*=t.ARC*t.ROOT3/12;for(var o=0;o<12;o++)t.VERT[2*o+1]=90-t.VERT[2*o+1],t.VERT[2*o]*=t.TO_RADIANS,t.VERT[2*o+1]*=t.TO_RADIANS;for(var i=0;i<22;i++){var a=t.cart(t.VERT[2*t.ISO[3*i]],t.VERT[2*t.ISO[3*i]+1]),s=t.cart(t.VERT[2*t.ISO[3*i+1]],t.VERT[2*t.ISO[3*i+1]+1]),u=t.cart(t.VERT[2*t.ISO[3*i+2]],t.VERT[2*t.ISO[3*i+2]+1]),c=a[0]+s[0]+u[0],l=a[1]+s[1]+u[1],f=a[2]+s[2]+u[2],h=Math.sqrt(c*c+l*l+f*f);t.CENTROID[3*i]=c/h,t.CENTROID[3*i+1]=l/h,t.CENTROID[3*i+2]=f/h;var p=Math.atan2(l,c),y=Math.atan2(Math.sqrt(c*c+l*l),f),d=[t.VERT[2*t.ISO[3*i]],t.VERT[2*t.ISO[3*i]+1]];d=t.yRot(d[0]-p,d[1],-y),t.produceZYZRotationMatrix(t.ROTATION_MATRIX,9*i,-p,-y,Math.PI/2-d[0]),t.produceZYZRotationMatrix(t.INVERSE_ROTATION_MATRIX,9*i,d[0]-Math.PI/2,y,p)}return t.FACE_ON_GRID=[-1,-1,0,1,2,-1,-1,3,-1,4,-1,-1,5,6,7,8,9,10,11,12,13,14,20,19,15,21,16,-1,17,18,-1,-1,-1],t.Z=Math.sqrt(5+2*Math.sqrt(5))/Math.sqrt(15),t.EL=Math.sqrt(8)/Math.sqrt(5+Math.sqrt(5)),t.EL6=t.EL/6,t.DVE=Math.sqrt(3+Math.sqrt(5))/Math.sqrt(5+Math.sqrt(5)),t.R=-3*t.EL6/t.DVE,t.OUT_OF_BOUNDS=[NaN,NaN],t}return A(r,[{key:"produceZYZRotationMatrix",value:function(t,e,r,n,o){var i=Math.sin(r),a=Math.cos(r),s=Math.sin(n),u=Math.cos(n),c=Math.sin(o),l=Math.cos(o);t[e+0]=a*u*l-c*i,t[e+1]=-i*u*l-c*a,t[e+2]=l*s,t[e+3]=c*u*a+l*i,t[e+4]=l*a-c*u*i,t[e+5]=c*s,t[e+6]=-s*a,t[e+7]=s*i,t[e+8]=u}},{key:"cart",value:function(t,e){var r=Math.sin(e);return[r*Math.cos(t),r*Math.sin(t),Math.cos(e)]}},{key:"findTriangle",value:function(t,e,r){for(var n=Number.MAX_VALUE,o=0,i=0;i<20;i++){var a=this.CENTROID[3*i]-t,s=this.CENTROID[3*i+1]-e,u=this.CENTROID[3*i+2]-r,c=a*a+s*s+u*u;if(c<n){if(c<.1)return i;o=i,n=c}}return o}},{key:"findMapTriangle",value:function(t,e){for(var r=Number.MAX_VALUE,n=0,o=0;o<20;o++){var i=this.CENTER_MAP[2*o]-t,a=this.CENTER_MAP[2*o+1]-e,s=i*i+a*a;s<r&&(n=o,r=s)}return n}},{key:"findTriangleGrid",value:function(t,e){var r,n=t/this.ARC,o=e/(this.ARC*this.ROOT3);if(o>-.25)if(o<.25)r=1;else{if(!(o<=.75))return-1;r=0,o=.5-o}else{if(!(o>=-.75))return-1;r=2,o=-o-.5}var i=n-(o+=.25),a=n+o,s=Math.floor(i),u=2*s+(Math.floor(a)!==s?1:0)+6;return u<0||u>=11?-1:this.FACE_ON_GRID[11*r+u]}},{key:"triangleTransform",value:function(t,e,r){var n=this.Z/r,o=n*t,i=n*e,a=Math.atan((2*i/this.ROOT3-this.EL6)/this.DVE),s=Math.atan((o-i/this.ROOT3-this.EL6)/this.DVE),u=Math.atan((-o-i/this.ROOT3-this.EL6)/this.DVE);return[.5*(s-u),(2*a-s-u)/(2*this.ROOT3)]}},{key:"inverseTriangleTransformNewton",value:function(t,e){for(var r=Math.tan(this.ROOT3*e+t),n=Math.tan(2*t),o=r*r+1,i=n*n+1,a=r,s=n,u=0,c=1,l=1,f=0;f<this.newton;f++)a=((u-=(a+s+u-this.R)/(o*c*c+i*l*l+1))+r)*(c=1/(1-u*r)),s=(u+n)*(l=1/(1-u*n));var h=this.ROOT3*(this.DVE*a+this.EL6)/2,p=(this.DVE*s+h/this.ROOT3+this.EL6)/this.Z,y=h/this.Z,d=1/Math.sqrt(1+p*p+y*y);return[d*p,d*y,d]}},{key:"inverseTriangleTransformCbrt",value:function(t,e){var r=Math.tan(this.ROOT3*e+t),n=Math.tan(2*t),o=n*r,i=-(this.R*n*r+2*n+2*r),a=3+this.R*n+this.R*r-2*n*r,s=-i/(3*o),u=s*s*s+(i*a-3*o*(n+r-this.R))/(6*o*o),c=a/(3*o)-s*s,l=Math.sqrt(-(u*u+c*c*c)),f=Math.sqrt(l*l+u*u),h=Math.atan2(l,u),p=2*Math.cbrt(f)*Math.cos(h/3)+s,y=(p+r)/(1-p*r),d=(p+n)/(1-p*n),g=this.ROOT3*(this.DVE*y+this.EL6)/2,v=(this.DVE*d+g/this.ROOT3+this.EL6)/this.Z,m=g/this.Z,b=1/Math.sqrt(1+v*v+m*m);return[b*v,b*m,b]}},{key:"inverseTriangleTransformCbrtNewton",value:function(t,e){for(var r=Math.tan(this.ROOT3*e+t),n=Math.tan(2*t),o=r+n,i=n*r,a=-(this.R*i+2*n+2*r),s=3+this.R*o-2*i,u=o-this.R,c=3*i,l=2*a,f=-u/s,h=0;h<this.newton;h++){var p=f*f;f-=(i*p*f+a*p+s*f+u)/(c*p+l*f+s)}var y=(f+r)/(1-f*r),d=(f+n)/(1-f*n),g=this.ROOT3*(this.DVE*y+this.EL6)/2,v=(this.DVE*d+g/this.ROOT3+this.EL6)/this.Z,m=g/this.Z,b=1/Math.sqrt(1+v*v+m*m);return[b*v,b*m,b]}},{key:"inverseTriangleTransform",value:function(t,e){return this.inverseTriangleTransformNewton(t,e)}},{key:"yRot",value:function(t,e,r){var n=this.cart(t,e),o=n[0];n[0]=n[2]*Math.sin(r)+o*Math.cos(r),n[2]=n[2]*Math.cos(r)-o*Math.sin(r);var i=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);return n[0]/=i,n[1]/=i,n[2]/=i,[Math.atan2(n[1],n[0]),Math.atan2(Math.sqrt(n[0]*n[0]+n[1]*n[1]),n[2])]}},{key:"fromGeo",value:function(t,e){e=90-e,t*=this.TO_RADIANS,e*=this.TO_RADIANS;var r=Math.sin(e),n=Math.cos(t)*r,o=Math.sin(t)*r,i=Math.cos(e),a=this.findTriangle(n,o,i),s=9*a,u=n*this.ROTATION_MATRIX[s+0]+o*this.ROTATION_MATRIX[s+1]+i*this.ROTATION_MATRIX[s+2],c=n*this.ROTATION_MATRIX[s+3]+o*this.ROTATION_MATRIX[s+4]+i*this.ROTATION_MATRIX[s+5],l=n*this.ROTATION_MATRIX[s+6]+o*this.ROTATION_MATRIX[s+7]+i*this.ROTATION_MATRIX[s+8],f=this.triangleTransform(u,c,l);return 0!==this.FLIP_TRIANGLE[a]&&(f[0]=-f[0],f[1]=-f[1]),n=f[0],(15===a&&n>f[1]*this.ROOT3||14===a)&&n>0&&(f[0]=.5*n-.5*this.ROOT3*f[1],f[1]=.5*this.ROOT3*n+.5*f[1],a+=6),f[0]+=this.CENTER_MAP[2*a],f[1]+=this.CENTER_MAP[2*a+1],f}},{key:"toGeo",value:function(t,e){var r=this.findTriangleGrid(t,e);if(-1===r)return this.OUT_OF_BOUNDS;switch(t-=this.CENTER_MAP[2*r],e-=this.CENTER_MAP[2*r+1],r){case 14:if(t>0)return this.OUT_OF_BOUNDS;break;case 20:if(-e*this.ROOT3>t)return this.OUT_OF_BOUNDS;break;case 15:if(t>0&&t>e*this.ROOT3)return this.OUT_OF_BOUNDS;break;case 21:if(t<0||-e*this.ROOT3>t)return this.OUT_OF_BOUNDS}0!==this.FLIP_TRIANGLE[r]&&(t=-t,e=-e);var n=this.inverseTriangleTransform(t,e);t=n[0],e=n[1];var o=n[2],i=9*r,a=t*this.INVERSE_ROTATION_MATRIX[i+0]+e*this.INVERSE_ROTATION_MATRIX[i+1]+o*this.INVERSE_ROTATION_MATRIX[i+2],s=t*this.INVERSE_ROTATION_MATRIX[i+3]+e*this.INVERSE_ROTATION_MATRIX[i+4]+o*this.INVERSE_ROTATION_MATRIX[i+5],u=t*this.INVERSE_ROTATION_MATRIX[i+6]+e*this.INVERSE_ROTATION_MATRIX[i+7]+o*this.INVERSE_ROTATION_MATRIX[i+8];return[Math.atan2(s,a)/this.TO_RADIANS,90-Math.acos(u)/this.TO_RADIANS]}},{key:"bounds",value:function(){return[-3*this.ARC,-.75*this.ARC*this.ROOT3,2.5*this.ARC,.75*this.ARC*this.ROOT3]}},{key:"upright",value:function(){return!1}},{key:"metersPerUnit",value:function(){return Math.sqrt(5101e11/(20*this.ROOT3*this.ARC*this.ARC/4))}}]),r}(),I=function(t){m(r,M);var e=b(r);function r(){var t;T(this,r),(t=e.call(this)).VECTOR_SCALE_FACTOR=.8715371854532509;for(var n=null,o=new Array(257),i=new Array(o.length),a=0;a<o.length;a++)o[a]=[];for(var s=0;s<i.length;s++)i[s]=[];try{if((n=context.getSafeOpenFile("craftscripts/data","conformal","txt")).exists()){for(var u=new BufferedReader(new FileReader(n)),c=0;c<o.length;c++){var l=new Array(o.length-c),f=new Array(o.length-c);o[c]=l,i[c]=f}for(var h=0;h<o.length;h++)for(var p=0;p<o.length-h;p++){var y=u.readLine(),d=(y=y.substring(1,y.length()-3)).split(", ");o[p][h]=Number.parseFloat(d[0])*t.VECTOR_SCALE_FACTOR,i[p][h]=Number.parseFloat(d[1])*t.VECTOR_SCALE_FACTOR}}else player.printError("Conformal.txt doesn't exist.");u.close()}catch(g){player.printError("Can't load conformal: "+g)}return t.inverse=new C(o,i),t}return A(r,[{key:"triangleTransform",value:function(t,e,n){var o=g(_(r.prototype),"triangleTransform",this).call(this,t,e,n);return t=o[0],e=o[1],o[0]/=this.ARC,o[1]/=this.ARC,o[0]+=.5,o[1]+=this.ROOT3/6,(o=this.inverse.applyNewtonsMethod(t,e,o[0],o[1],5))[0]-=.5,o[1]-=this.ROOT3/6,o[0]*=this.ARC,o[1]*=this.ARC,o}},{key:"inverseTriangleTransform",value:function(t,e){t/=this.ARC,e/=this.ARC,t+=.5,e+=this.ROOT3/6;var n=this.inverse.getInterpolatedVector(t,e);return g(_(r.prototype),"inverseTriangleTransform",this).call(this,n[0],n[1])}},{key:"metersPerUnit",value:function(){return 40075017/(2*Math.PI)/this.VECTOR_SCALE_FACTOR}}]),r}(),N=function(t){m(r,I);var e=b(r);function r(){var t;return T(this,r),(t=e.call(this)).THETA=-150*t.TO_RADIANS,t.SIN_THETA=Math.sin(t.THETA),t.COS_THETA=Math.cos(t.THETA),t.BERING_X=-.3420420960118339,t.BERING_Y=-.322211064085279,t.ARCTIC_Y=-.2,t.ARCTIC_M=(t.ARCTIC_Y-t.ROOT3*t.ARC/4)/(t.BERING_X- -.5*t.ARC),t.ARCTIC_B=t.ARCTIC_Y-t.ARCTIC_M*t.BERING_X,t.ALEUTIAN_Y=-.5000446805492526,t.ALEUTIAN_XL=-.5149231279757507,t.ALEUTIAN_XR=-.45,t.ALEUTIAN_M=(t.BERING_Y-t.ALEUTIAN_Y)/(t.BERING_X-t.ALEUTIAN_XR),t.ALEUTIAN_B=t.BERING_Y-t.ALEUTIAN_M*t.BERING_X,t}return A(r,[{key:"fromGeo",value:function(t,e){var n=g(_(r.prototype),"fromGeo",this).call(this,t,e),o=n[0],i=n[1],a=this.isEurasianPart(o,i);if(i-=.75*this.ARC*this.ROOT3,a){var s=o+=this.ARC;o=this.COS_THETA*o-this.SIN_THETA*i,i=this.SIN_THETA*s+this.COS_THETA*i}else o-=this.ARC;return n[0]=i,n[1]=-o,n}},{key:"toGeo",value:function(t,e){var n;n=e<0?t>0:e>this.ARC/2?t>-this.ROOT3*this.ARC/2:e*-this.ROOT3<t;var o=t;return t=-e,e=o,n?(o=t,t=this.COS_THETA*t+this.SIN_THETA*e,e=this.COS_THETA*e-this.SIN_THETA*o,t-=this.ARC):t+=this.ARC,e+=.75*this.ARC*this.ROOT3,n!==this.isEurasianPart(t,e)?this.OUT_OF_BOUNDS:g(_(r.prototype),"toGeo",this).call(this,t,e)}},{key:"isEurasianPart",value:function(t,e){return!(t>0)&&(t<-.5*this.ARC||(e>this.ROOT3*this.ARC/4?t<0:e<this.ALEUTIAN_Y?e<this.ALEUTIAN_Y+this.ALEUTIAN_XL-t:e>this.BERING_Y?e<this.ARCTIC_Y?t<this.BERING_X:e<this.ARCTIC_M*t+this.ARCTIC_B:e>this.ALEUTIAN_M*t+this.ALEUTIAN_B))}},{key:"bounds",value:function(){return[-1.5*this.ARC*this.ROOT3,-1.5*this.ARC,3*this.ARC,this.ROOT3*this.ARC]}}]),r}(),C=function(){function t(e,r){T(this,t),this.ROOT3=Math.sqrt(3),this.sideLength=e.length-1,this.VECTOR_X=e,this.VECTOR_Y=r}return A(t,[{key:"getInterpolatedVector",value:function(t,e){t*=this.sideLength;var r,n,o,i,a,s,u,c,l=2*(e*=this.sideLength)/this.ROOT3,f=t-.5*l,h=Math.trunc(f),p=Math.trunc(l);h<0?h=0:h>=this.sideLength&&(h=this.sideLength-1),p<0?p=0:p>=this.sideLength-h&&(p=this.sideLength-h-1);var y=1;e<-this.ROOT3*(t-h-p-1)||p===this.sideLength-h-1?(r=this.VECTOR_X[h][p],n=this.VECTOR_Y[h][p],o=this.VECTOR_X[h][p+1],i=this.VECTOR_Y[h][p+1],a=this.VECTOR_X[h+1][p],s=this.VECTOR_Y[h+1][p],u=.5*this.ROOT3*p,c=h+1+.5*p):(r=this.VECTOR_X[h][p+1],n=this.VECTOR_Y[h][p+1],o=this.VECTOR_X[h+1][p],i=this.VECTOR_Y[h+1][p],a=this.VECTOR_X[h+1][p+1],s=this.VECTOR_Y[h+1][p+1],y=-1,e=-e,u=-.5*this.ROOT3*(p+1),c=h+1+.5*(p+1));var d=-(e-u)/this.ROOT3-(t-c),g=2*(e-u)/this.ROOT3,v=1-d-g;return[r*d+o*g+a*v,n*d+i*g+s*v,(a-r)*this.sideLength,this.sideLength*y*(2*o-r-a)/this.ROOT3,(s-n)*this.sideLength,this.sideLength*y*(2*i-n-s)/this.ROOT3]}},{key:"applyNewtonsMethod",value:function(t,e,r,n,o){for(var i=0;i<o;i++){var a=this.getInterpolatedVector(r,n),s=a[0]-t,u=a[1]-e,c=a[2],l=a[3],f=a[4],h=a[5],p=1/(c*h-l*f);r-=p*(h*s-l*u),n-=p*(-f*s+c*u)}return[r,n]}}]),t}(),S=function(){var t=new N,e=(new R).orientProjection(t);return new k(e,7318261.522857145,7318261.522857145)},j={ignoredBlocks:[context.getBlock("air").id,context.getBlock("tallgrass").id,context.getBlock("sapling").id,context.getBlock("log").id,context.getBlock("log2").id,context.getBlock("leaves").id,context.getBlock("leaves2").id,context.getBlock("deadbush").id,context.getBlock("red_flower").id,context.getBlock("yellow_flower").id,context.getBlock("red_mushroom").id,context.getBlock("brown_mushroom").id,context.getBlock("vine").id,context.getBlock("waterlily").id,context.getBlock("cactus").id,context.getBlock("reeds").id,context.getBlock("pumpkin").id,context.getBlock("melon_block").id,context.getBlock("snow_layer").id,context.getBlock("double_plant").id],allowedBlocks:[context.getBlock("grass").id,context.getBlock("dirt").id,context.getBlock("stone").id,context.getBlock("sand").id,context.getBlock("grass_path").id,context.getBlock("concrete").id,context.getBlock("gravel").id,context.getBlock("water").id,context.getBlock("lava").id]};function x(t){return function(t){if(Array.isArray(t))return L(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||B(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(u){o=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}(t,e)||B(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){if(t){if("string"==typeof t)return L(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(t,e):void 0}}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var V=j.ignoredBlocks,D=j.allowedBlocks;importPackage(Packages.com.sk89q.worldedit),importPackage(Packages.com.sk89q.worldedit.math),importPackage(Packages.com.sk89q.worldedit.blocks);var X=context.remember(),U=0,F=new Error("Incorrect data format");function G(t,e,r,n,o,i,a,s){for(var u=n-t,c=o-e,l=i-r,f=Math.max(Math.abs(u),Math.abs(c),Math.abs(l)),h=u/f,p=c/f,y=l/f,d=Math.max(Math.abs(h),Math.abs(p),Math.abs(y)),g=0;g<f;g+=d){var v=new Vector(Math.floor(t+h*g),Math.floor(e+p*g),Math.floor(r+y*g));Y(v,s)&&(v=q(v),D.includes(X.getBlock(v).id)&&(s.up&&(v=v.add(new Vector(0,1,0))),X.setBlock(v,a),U++))}}function q(t){for(;!V.includes(X.getBlock(t.add(new Vector(0,1,0))).id);)t=t.add(new Vector(0,1,0));for(;V.includes(X.getBlock(t).id);)t=t.add(new Vector(0,-1,0));return t}function Y(t,e){return!e.region||e.region.contains(new Vector(t.x,e.region.center.y,t.z))}var z=function(t,e,r){r=r||{},function(t,e,r){var n=player.getPosition().y;e=context.getBlock(e);for(var o=S(),i=0;i<t.length;i++)for(var a=t[i],s=0;s<a.length-1;s++){var u=P(o.fromGeo.apply(o,x(a[s])),2),c=u[0],l=u[1],f=P(o.fromGeo.apply(o,x(a[s+1])),2);G(c,n,l,f[0],n,f[1],e,r)}player.print("Operation completed ("+U+" blocks affected).")}(function(t){if("FeatureCollection"!==t.type)throw F;if(!Array.isArray(t.features))throw F;for(var e=[],r=0,n=0;n<t.features.length;n++)if("LineString"===t.features[n].geometry.type){var o=t.features[n].geometry.coordinates;e.push(o),r+=o.length}return player.print("\xa77".concat(r," lines to draw")),e}(t),e,r)};function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}importPackage(Packages.com.sk89q.worldedit),importPackage(Packages.com.sk89q.worldedit.math),importPackage(Packages.com.sk89q.worldedit.blocks);var $,H=context.getSession();switch(""+argv[1]){case"radius":context.checkArgs(2,3,"<radius> [flags]\n \u2022 \xa7o/cs rails radius 7\n \u2022 \xa7o/cs rails radius 50 u\nFlags:\n \u2022 \xa7lu\xa7r\xa7c Draw a block above"),W(Number.parseFloat(argv[2]),{x:player.getPosition().x,z:player.getPosition().z},{up:argv[3]&&(""+argv[3]).includes("u")});break;case"region":context.checkArgs(1,2,"[flags]\n \u2022 \xa7o/cs rails region\n \u2022 \xa7o/cs rails region u\nFlags:\n \u2022 \xa7lu\xa7r\xa7c Draw a block above"),$=H.getRegionSelector(player.getWorld()).getRegion(),W(J(),$.center,{up:argv[2]&&(""+argv[2]).includes("u")});break;case"regionEdge":context.checkArgs(1,2,"[flags]\n \u2022 \xa7o/cs rails regionEdge\n \u2022 \xa7o/cs rails regionEdge u\nFlags:\n \u2022 \xa7lu\xa7r\xa7c Draws a block above"),$=H.getRegionSelector(player.getWorld()).getRegion(),W(J(),$.center,{region:$,up:argv[2]&&(""+argv[2]).includes("u")});break;default:argv[1]&&player.printError(argv[1]+" is not a valid mode."),context.checkArgs(1,3,"<mode> [...args] [flags]\nModes:\n \u2022 \xa7lradius\xa7r\xa7c Select rails in a radius\n \u2022 \xa7lregion\xa7r\xa7c Select rails in a region\n \u2022 \xa7lregionEdge\xa7r\xa7c Select rails in a region and draw only in the defined region\nFlags:\n \u2022 \xa7lu\xa7r\xa7c Draw a block above")}function W(t,e,r){player.print("\xa77Please wait...");var n=function(t){for(var e=S(),r=0;r<t.length;r++)t[r]=e.toGeo.apply(e,function(t){if(Array.isArray(t))return Z(t)}(n=t[r])||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return Z(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(t,void 0):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var n;return t}(function(t,e){var r=Math.sqrt(2)/2*t;return[[e.x+t,e.z],[e.x-t,e.z],[e.x,e.z-t],[e.x,e.z+t],[e.x+r,e.z+r],[e.x-r,e.z-r],[e.x+r,e.z-r],[e.x-r,e.z+r]]}(t,e)),o=function(t){for(var e=[0,0],r=Number.MAX_VALUE,n=0;n<t.length;n++){var o=t[n][0]+t[n][1];o<r&&(e=t[n],r=o)}return[e[1],e[0]]}(n),i=function(t){for(var e=[0,0],r=Number.MIN_VALUE,n=0;n<t.length;n++){var o=t[n][0]+t[n][1];o>r&&(e=t[n],r=o)}return[e[1],e[0]]}(n),a='(way[railway~"^.*$"]('.concat(o.join(","),",").concat(i.join(","),");>;);out;");y(a,function(t,e){if(t)throw t;z(e,"iron_block",r)})}function J(){var t=Math.abs($.pos1.x-$.pos2.x),e=Math.abs($.pos1.z-$.pos2.z);return Math.sqrt(t*t+e*e)/2}}();